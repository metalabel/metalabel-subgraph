{
  "_format": "hh-sol-artifact-1",
  "contractName": "WaterfallFactory",
  "sourceName": "contracts/WaterfallFactory.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "contract INodeRegistry",
          "name": "_nodeRegistry",
          "type": "address"
        },
        {
          "internalType": "contract IWaterfallModuleFactory",
          "name": "_waterfallFactory",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "NotAuthorized",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "resource",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "topic",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "ResourceBroadcast",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint64",
          "name": "nodeId",
          "type": "uint64"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "nonWaterfallRecipient",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address[]",
          "name": "recipients",
          "type": "address[]"
        },
        {
          "indexed": false,
          "internalType": "uint256[]",
          "name": "thresholds",
          "type": "uint256[]"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "metadata",
          "type": "string"
        }
      ],
      "name": "WaterfallCreated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "topic",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "broadcast",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "topic",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "broadcastAndStore",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "controlNode",
      "outputs": [
        {
          "internalType": "uint64",
          "name": "",
          "type": "uint64"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "nonWaterfallRecipient",
          "type": "address"
        },
        {
          "internalType": "address[]",
          "name": "recipients",
          "type": "address[]"
        },
        {
          "internalType": "uint256[]",
          "name": "thresholds",
          "type": "uint256[]"
        },
        {
          "internalType": "uint64",
          "name": "controlNodeId",
          "type": "uint64"
        },
        {
          "internalType": "string",
          "name": "metadata",
          "type": "string"
        }
      ],
      "name": "createWaterfall",
      "outputs": [
        {
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "name": "messageStorage",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nodeRegistry",
      "outputs": [
        {
          "internalType": "contract INodeRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "waterfallFactory",
      "outputs": [
        {
          "internalType": "contract IWaterfallModuleFactory",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x60c060405234801561001057600080fd5b50604051610db3380380610db383398101604081905261002f9161005e565b6001600160a01b039182166080521660a052610098565b6001600160a01b038116811461005b57600080fd5b50565b6000806040838503121561007157600080fd5b825161007c81610046565b602084015190925061008d81610046565b809150509250929050565b60805160a051610cdb6100d86000396000818160f70152610582015260008181610136015281816101ce0152818161033901526104db0152610cdb6000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063c38b12591161005b578063c38b1259146100f2578063d9b5c4a514610131578063f1c1f05914610158578063f2565f321461017857600080fd5b80634fd8ae89146100825780636dbb47b514610097578063b929a8ae146100aa575b600080fd5b61009561009036600461078a565b61018b565b005b6100956100a536600461078a565b6102f6565b6100d46100b836600461080d565b60016020526000908152604090205467ffffffffffffffff1681565b60405167ffffffffffffffff90911681526020015b60405180910390f35b6101197f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100e9565b6101197f000000000000000000000000000000000000000000000000000000000000000081565b61016b610166366004610847565b610400565b6040516100e9919061090b565b6101196101863660046109a5565b6104b3565b6001600160a01b0385811660009081526001602052604090819020549051632565da5f60e11b815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa158015610215573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102399190610a80565b6102565760405163ea8e4eb560e01b815260040160405180910390fd5b8282600080896001600160a01b03166001600160a01b03168152602001908152602001600020878760405161028c929190610aa2565b9081526040519081900360200190206102a6929091610690565b50856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516102e69493929190610adb565b60405180910390a2505050505050565b6001600160a01b0385811660009081526001602052604090819020549051632565da5f60e11b815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa158015610380573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103a49190610a80565b6103c15760405163ea8e4eb560e01b815260040160405180910390fd5b856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516102e69493929190610adb565b600060208181529281526040902081518083018401805192815290840192909301919091209152805461043290610b0d565b80601f016020809104026020016040519081016040528092919081815260200182805461045e90610b0d565b80156104ab5780601f10610480576101008083540402835291602001916104ab565b820191906000526020600020905b81548152906001019060200180831161048e57829003601f168201915b505050505081565b604051632565da5f60e11b815267ffffffffffffffff841660048201523360248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690634acbb4be90604401602060405180830381865afa15801561052a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061054e9190610a80565b61056b5760405163ea8e4eb560e01b815260040160405180910390fd5b60405163c93793f360e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063c93793f3906105c1908d908d908d908d908d908d90600401610bc6565b6020604051808303816000875af11580156105e0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106049190610c13565b6001600160a01b03811660008181526001602052604090819020805467ffffffffffffffff191667ffffffffffffffff891617905551919250907f997d77fab75ff27743238d46d3e751331e5f4d7538e3467e747d32b4b939cf179061067b9087908e908e908e908e908e908e908d908d90610c30565b60405180910390a29998505050505050505050565b82805461069c90610b0d565b90600052602060002090601f0160209004810192826106be5760008555610704565b82601f106106d75782800160ff19823516178555610704565b82800160010185558215610704579182015b828111156107045782358255916020019190600101906106e9565b50610710929150610714565b5090565b5b808211156107105760008155600101610715565b6001600160a01b038116811461073e57600080fd5b50565b60008083601f84011261075357600080fd5b50813567ffffffffffffffff81111561076b57600080fd5b60208301915083602082850101111561078357600080fd5b9250929050565b6000806000806000606086880312156107a257600080fd5b85356107ad81610729565b9450602086013567ffffffffffffffff808211156107ca57600080fd5b6107d689838a01610741565b909650945060408801359150808211156107ef57600080fd5b506107fc88828901610741565b969995985093965092949392505050565b60006020828403121561081f57600080fd5b813561082a81610729565b9392505050565b634e487b7160e01b600052604160045260246000fd5b6000806040838503121561085a57600080fd5b823561086581610729565b9150602083013567ffffffffffffffff8082111561088257600080fd5b818501915085601f83011261089657600080fd5b8135818111156108a8576108a8610831565b604051601f8201601f19908116603f011681019083821181831017156108d0576108d0610831565b816040528281528860208487010111156108e957600080fd5b8260208601602083013760006020848301015280955050505050509250929050565b600060208083528351808285015260005b818110156109385785810183015185820160400152820161091c565b8181111561094a576000604083870101525b50601f01601f1916929092016040019392505050565b60008083601f84011261097257600080fd5b50813567ffffffffffffffff81111561098a57600080fd5b6020830191508360208260051b850101111561078357600080fd5b600080600080600080600080600060c08a8c0312156109c357600080fd5b89356109ce81610729565b985060208a01356109de81610729565b975060408a013567ffffffffffffffff808211156109fb57600080fd5b610a078d838e01610960565b909950975060608c0135915080821115610a2057600080fd5b610a2c8d838e01610960565b909750955060808c013591508082168214610a4657600080fd5b90935060a08b01359080821115610a5c57600080fd5b50610a698c828d01610741565b915080935050809150509295985092959850929598565b600060208284031215610a9257600080fd5b8151801515811461082a57600080fd5b8183823760009101908152919050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b604081526000610aef604083018688610ab2565b8281036020840152610b02818587610ab2565b979650505050505050565b600181811c90821680610b2157607f821691505b602082108103610b4157634e487b7160e01b600052602260045260246000fd5b50919050565b8183526000602080850194508260005b85811015610b85578135610b6a81610729565b6001600160a01b031687529582019590820190600101610b57565b509495945050505050565b81835260006001600160fb1b03831115610ba957600080fd5b8260051b8083602087013760009401602001938452509192915050565b6001600160a01b03878116825286166020820152608060408201819052600090610bf39083018688610b47565b8281036060840152610c06818587610b90565b9998505050505050505050565b600060208284031215610c2557600080fd5b815161082a81610729565b67ffffffffffffffff8a1681526001600160a01b0389811660208301528816604082015260c060608201819052600090610c6d908301888a610b47565b8281036080840152610c80818789610b90565b905082810360a0840152610c95818587610ab2565b9c9b50505050505050505050505056fea264697066735822122071aa1884cf1a48d018f0644cfa8addc09e32ab04ee889c5bee5a0b5c401cee8064736f6c634300080d0033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061007d5760003560e01c8063c38b12591161005b578063c38b1259146100f2578063d9b5c4a514610131578063f1c1f05914610158578063f2565f321461017857600080fd5b80634fd8ae89146100825780636dbb47b514610097578063b929a8ae146100aa575b600080fd5b61009561009036600461078a565b61018b565b005b6100956100a536600461078a565b6102f6565b6100d46100b836600461080d565b60016020526000908152604090205467ffffffffffffffff1681565b60405167ffffffffffffffff90911681526020015b60405180910390f35b6101197f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100e9565b6101197f000000000000000000000000000000000000000000000000000000000000000081565b61016b610166366004610847565b610400565b6040516100e9919061090b565b6101196101863660046109a5565b6104b3565b6001600160a01b0385811660009081526001602052604090819020549051632565da5f60e11b815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa158015610215573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102399190610a80565b6102565760405163ea8e4eb560e01b815260040160405180910390fd5b8282600080896001600160a01b03166001600160a01b03168152602001908152602001600020878760405161028c929190610aa2565b9081526040519081900360200190206102a6929091610690565b50856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516102e69493929190610adb565b60405180910390a2505050505050565b6001600160a01b0385811660009081526001602052604090819020549051632565da5f60e11b815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa158015610380573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103a49190610a80565b6103c15760405163ea8e4eb560e01b815260040160405180910390fd5b856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516102e69493929190610adb565b600060208181529281526040902081518083018401805192815290840192909301919091209152805461043290610b0d565b80601f016020809104026020016040519081016040528092919081815260200182805461045e90610b0d565b80156104ab5780601f10610480576101008083540402835291602001916104ab565b820191906000526020600020905b81548152906001019060200180831161048e57829003601f168201915b505050505081565b604051632565da5f60e11b815267ffffffffffffffff841660048201523360248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690634acbb4be90604401602060405180830381865afa15801561052a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061054e9190610a80565b61056b5760405163ea8e4eb560e01b815260040160405180910390fd5b60405163c93793f360e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063c93793f3906105c1908d908d908d908d908d908d90600401610bc6565b6020604051808303816000875af11580156105e0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106049190610c13565b6001600160a01b03811660008181526001602052604090819020805467ffffffffffffffff191667ffffffffffffffff891617905551919250907f997d77fab75ff27743238d46d3e751331e5f4d7538e3467e747d32b4b939cf179061067b9087908e908e908e908e908e908e908d908d90610c30565b60405180910390a29998505050505050505050565b82805461069c90610b0d565b90600052602060002090601f0160209004810192826106be5760008555610704565b82601f106106d75782800160ff19823516178555610704565b82800160010185558215610704579182015b828111156107045782358255916020019190600101906106e9565b50610710929150610714565b5090565b5b808211156107105760008155600101610715565b6001600160a01b038116811461073e57600080fd5b50565b60008083601f84011261075357600080fd5b50813567ffffffffffffffff81111561076b57600080fd5b60208301915083602082850101111561078357600080fd5b9250929050565b6000806000806000606086880312156107a257600080fd5b85356107ad81610729565b9450602086013567ffffffffffffffff808211156107ca57600080fd5b6107d689838a01610741565b909650945060408801359150808211156107ef57600080fd5b506107fc88828901610741565b969995985093965092949392505050565b60006020828403121561081f57600080fd5b813561082a81610729565b9392505050565b634e487b7160e01b600052604160045260246000fd5b6000806040838503121561085a57600080fd5b823561086581610729565b9150602083013567ffffffffffffffff8082111561088257600080fd5b818501915085601f83011261089657600080fd5b8135818111156108a8576108a8610831565b604051601f8201601f19908116603f011681019083821181831017156108d0576108d0610831565b816040528281528860208487010111156108e957600080fd5b8260208601602083013760006020848301015280955050505050509250929050565b600060208083528351808285015260005b818110156109385785810183015185820160400152820161091c565b8181111561094a576000604083870101525b50601f01601f1916929092016040019392505050565b60008083601f84011261097257600080fd5b50813567ffffffffffffffff81111561098a57600080fd5b6020830191508360208260051b850101111561078357600080fd5b600080600080600080600080600060c08a8c0312156109c357600080fd5b89356109ce81610729565b985060208a01356109de81610729565b975060408a013567ffffffffffffffff808211156109fb57600080fd5b610a078d838e01610960565b909950975060608c0135915080821115610a2057600080fd5b610a2c8d838e01610960565b909750955060808c013591508082168214610a4657600080fd5b90935060a08b01359080821115610a5c57600080fd5b50610a698c828d01610741565b915080935050809150509295985092959850929598565b600060208284031215610a9257600080fd5b8151801515811461082a57600080fd5b8183823760009101908152919050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b604081526000610aef604083018688610ab2565b8281036020840152610b02818587610ab2565b979650505050505050565b600181811c90821680610b2157607f821691505b602082108103610b4157634e487b7160e01b600052602260045260246000fd5b50919050565b8183526000602080850194508260005b85811015610b85578135610b6a81610729565b6001600160a01b031687529582019590820190600101610b57565b509495945050505050565b81835260006001600160fb1b03831115610ba957600080fd5b8260051b8083602087013760009401602001938452509192915050565b6001600160a01b03878116825286166020820152608060408201819052600090610bf39083018688610b47565b8281036060840152610c06818587610b90565b9998505050505050505050565b600060208284031215610c2557600080fd5b815161082a81610729565b67ffffffffffffffff8a1681526001600160a01b0389811660208301528816604082015260c060608201819052600090610c6d908301888a610b47565b8281036080840152610c80818789610b90565b905082810360a0840152610c95818587610ab2565b9c9b50505050505050505050505056fea264697066735822122071aa1884cf1a48d018f0644cfa8addc09e32ab04ee889c5bee5a0b5c401cee8064736f6c634300080d0033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
