{
  "_format": "hh-sol-artifact-1",
  "contractName": "RevenueModuleFactory",
  "sourceName": "contracts/RevenueModuleFactory.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "contract INodeRegistry",
          "name": "_nodeRegistry",
          "type": "address"
        },
        {
          "internalType": "contract ISplitMain",
          "name": "_splits",
          "type": "address"
        },
        {
          "internalType": "contract IWaterfallModuleFactory",
          "name": "_waterfallFactory",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "NotAuthorized",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "resource",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "topic",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "ResourceBroadcast",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "split",
          "type": "address"
        },
        {
          "components": [
            {
              "internalType": "address",
              "name": "token",
              "type": "address"
            },
            {
              "internalType": "address[]",
              "name": "waterfallRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint256[]",
              "name": "waterfallThresholds",
              "type": "uint256[]"
            },
            {
              "internalType": "address[]",
              "name": "splitRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint32[]",
              "name": "splitPercentAllocations",
              "type": "uint32[]"
            },
            {
              "internalType": "uint32",
              "name": "splitDistributorFee",
              "type": "uint32"
            },
            {
              "internalType": "uint64",
              "name": "controlNodeId",
              "type": "uint64"
            },
            {
              "internalType": "string",
              "name": "metadata",
              "type": "string"
            }
          ],
          "indexed": false,
          "internalType": "struct DeployRevenueModuleConfig",
          "name": "config",
          "type": "tuple"
        }
      ],
      "name": "RevenueModuleDeployed",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "resource",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "topic",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "broadcast",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "controlNode",
      "outputs": [
        {
          "internalType": "uint64",
          "name": "",
          "type": "uint64"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "token",
              "type": "address"
            },
            {
              "internalType": "address[]",
              "name": "waterfallRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint256[]",
              "name": "waterfallThresholds",
              "type": "uint256[]"
            },
            {
              "internalType": "address[]",
              "name": "splitRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint32[]",
              "name": "splitPercentAllocations",
              "type": "uint32[]"
            },
            {
              "internalType": "uint32",
              "name": "splitDistributorFee",
              "type": "uint32"
            },
            {
              "internalType": "uint64",
              "name": "controlNodeId",
              "type": "uint64"
            },
            {
              "internalType": "string",
              "name": "metadata",
              "type": "string"
            }
          ],
          "internalType": "struct DeployRevenueModuleConfig",
          "name": "config",
          "type": "tuple"
        }
      ],
      "name": "deployRevenueModule",
      "outputs": [
        {
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "split",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nodeRegistry",
      "outputs": [
        {
          "internalType": "contract INodeRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "splits",
      "outputs": [
        {
          "internalType": "contract ISplitMain",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "waterfallFactory",
      "outputs": [
        {
          "internalType": "contract IWaterfallModuleFactory",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x60e060405234801561001057600080fd5b50604051610ea2380380610ea283398101604081905261002f91610064565b6001600160a01b0392831660805290821660a0521660c0526100b1565b6001600160a01b038116811461006157600080fd5b50565b60008060006060848603121561007957600080fd5b83516100848161004c565b60208501519093506100958161004c565b60408501519092506100a68161004c565b809150509250925092565b60805160a05160c051610da76100fb6000396000818161014b015261046401526000818160b40152610284015260008181610172015281816101a101526106020152610da76000f3fe608060405234801561001057600080fd5b50600436106100725760003560e01c8063b929a8ae11610050578063b929a8ae14610103578063c38b125914610146578063d9b5c4a51461016d57600080fd5b80630edf76c7146100775780636cbdec7d146100af5780636dbb47b5146100ee575b600080fd5b61008a6100853660046106d9565b610194565b604080516001600160a01b039384168152929091166020830152015b60405180910390f35b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100a6565b6101016100fc36600461078d565b6105a6565b005b61012d610111366004610810565b60006020819052908152604090205467ffffffffffffffff1681565b60405167ffffffffffffffff90911681526020016100a6565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6000806001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016634acbb4be6101d660e0860160c08701610845565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b16815267ffffffffffffffff9091166004820152336024820152604401602060405180830381865afa158015610239573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061025d9190610860565b61027a5760405163ea8e4eb560e01b815260040160405180910390fd5b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016637601f7826102b66060860186610882565b6102c36080880188610882565b6102d360c08a0160a08b016108e0565b60006040518763ffffffff1660e01b81526004016102f69695949392919061093f565b6020604051808303816000875af1158015610315573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061033991906109c0565b9050600061034a6020850185610882565b610356915060016109f3565b67ffffffffffffffff81111561036e5761036e610a0c565b604051908082528060200260200182016040528015610397578160200160208202803683370190505b50905060005b6103aa6020860186610882565b9050811015610421576103c06020860186610882565b828181106103d0576103d0610a22565b90506020020160208101906103e59190610810565b8282815181106103f7576103f7610a22565b6001600160a01b03909216602092830291909101909101528061041981610a38565b91505061039d565b508181600183516104329190610a51565b8151811061044257610442610a22565b60200260200101906001600160a01b031690816001600160a01b0316815250507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663c93793f38560000160208101906104a49190610810565b84846104b360408a018a610882565b6040518663ffffffff1660e01b81526004016104d3959493929190610aaf565b6020604051808303816000875af11580156104f2573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061051691906109c0565b925061052860e0850160c08601610845565b6001600160a01b0384811660008181526020819052604090819020805467ffffffffffffffff191667ffffffffffffffff9590951694909417909355915190841691907f3099cd8e4377ae77043ad3eaf9b8378b4821c82145cc78c0525c6164717a401c90610598908890610c1e565b60405180910390a350915091565b6001600160a01b03858116600090815260208190526040908190205490517f4acbb4be00000000000000000000000000000000000000000000000000000000815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa158015610649573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061066d9190610860565b61068a5760405163ea8e4eb560e01b815260040160405180910390fd5b856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516106c99493929190610d4a565b60405180910390a2505050505050565b6000602082840312156106eb57600080fd5b813567ffffffffffffffff81111561070257600080fd5b8201610100818503121561071557600080fd5b9392505050565b6001600160a01b038116811461073157600080fd5b50565b803561073f8161071c565b919050565b60008083601f84011261075657600080fd5b50813567ffffffffffffffff81111561076e57600080fd5b60208301915083602082850101111561078657600080fd5b9250929050565b6000806000806000606086880312156107a557600080fd5b85356107b08161071c565b9450602086013567ffffffffffffffff808211156107cd57600080fd5b6107d989838a01610744565b909650945060408801359150808211156107f257600080fd5b506107ff88828901610744565b969995985093965092949392505050565b60006020828403121561082257600080fd5b81356107158161071c565b803567ffffffffffffffff8116811461073f57600080fd5b60006020828403121561085757600080fd5b6107158261082d565b60006020828403121561087257600080fd5b8151801515811461071557600080fd5b6000808335601e1984360301811261089957600080fd5b83018035915067ffffffffffffffff8211156108b457600080fd5b6020019150600581901b360382131561078657600080fd5b803563ffffffff8116811461073f57600080fd5b6000602082840312156108f257600080fd5b610715826108cc565b8183526000602080850194508260005b858110156109345763ffffffff610921836108cc565b168752958201959082019060010161090b565b509495945050505050565b6080808252810186905260008760a08301825b898110156109825782356109658161071c565b6001600160a01b0316825260209283019290910190600101610952565b50838103602085015261099681888a6108fb565b9250505063ffffffff841660408301526001600160a01b0383166060830152979650505050505050565b6000602082840312156109d257600080fd5b81516107158161071c565b634e487b7160e01b600052601160045260246000fd5b80820180821115610a0657610a066109dd565b92915050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b600060018201610a4a57610a4a6109dd565b5060010190565b81810381811115610a0657610a066109dd565b81835260007f07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff831115610a9657600080fd5b8260051b80836020870137939093016020019392505050565b6000608082016001600160a01b0380891684526020818916818601526080604086015282885180855260a087019150828a01945060005b81811015610b04578551851683529483019491830191600101610ae6565b50508581036060870152610b1981888a610a64565b9b9a5050505050505050505050565b6000808335601e19843603018112610b3f57600080fd5b830160208101925035905067ffffffffffffffff811115610b5f57600080fd5b8060051b360382131561078657600080fd5b8183526000602080850194508260005b85811015610934578135610b948161071c565b6001600160a01b031687529582019590820190600101610b81565b6000808335601e19843603018112610bc657600080fd5b830160208101925035905067ffffffffffffffff811115610be657600080fd5b80360382131561078657600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60208152610c3f60208201610c3284610734565b6001600160a01b03169052565b6000610c4e6020840184610b28565b610100806040860152610c6661012086018385610b71565b9250610c756040870187610b28565b9250601f1980878603016060880152610c8f858584610a64565b9450610c9e6060890189610b28565b9450915080878603016080880152610cb7858584610b71565b9450610cc66080890189610b28565b94509150808786030160a0880152610cdf8585846108fb565b9450610ced60a089016108cc565b63ffffffff811660c08901529350610d0760c0890161082d565b67ffffffffffffffff811660e08901529350610d2660e0890189610baf565b9450915080878603018388015250610d3f848483610bf5565b979650505050505050565b604081526000610d5e604083018688610bf5565b8281036020840152610d3f818587610bf556fea2646970667358221220bf1d9c28ee588b7346cfab8da07e1a5f83dd9bd05c9bc9b603343eaab25a634d64736f6c63430008110033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100725760003560e01c8063b929a8ae11610050578063b929a8ae14610103578063c38b125914610146578063d9b5c4a51461016d57600080fd5b80630edf76c7146100775780636cbdec7d146100af5780636dbb47b5146100ee575b600080fd5b61008a6100853660046106d9565b610194565b604080516001600160a01b039384168152929091166020830152015b60405180910390f35b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100a6565b6101016100fc36600461078d565b6105a6565b005b61012d610111366004610810565b60006020819052908152604090205467ffffffffffffffff1681565b60405167ffffffffffffffff90911681526020016100a6565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6000806001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016634acbb4be6101d660e0860160c08701610845565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b16815267ffffffffffffffff9091166004820152336024820152604401602060405180830381865afa158015610239573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061025d9190610860565b61027a5760405163ea8e4eb560e01b815260040160405180910390fd5b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016637601f7826102b66060860186610882565b6102c36080880188610882565b6102d360c08a0160a08b016108e0565b60006040518763ffffffff1660e01b81526004016102f69695949392919061093f565b6020604051808303816000875af1158015610315573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061033991906109c0565b9050600061034a6020850185610882565b610356915060016109f3565b67ffffffffffffffff81111561036e5761036e610a0c565b604051908082528060200260200182016040528015610397578160200160208202803683370190505b50905060005b6103aa6020860186610882565b9050811015610421576103c06020860186610882565b828181106103d0576103d0610a22565b90506020020160208101906103e59190610810565b8282815181106103f7576103f7610a22565b6001600160a01b03909216602092830291909101909101528061041981610a38565b91505061039d565b508181600183516104329190610a51565b8151811061044257610442610a22565b60200260200101906001600160a01b031690816001600160a01b0316815250507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663c93793f38560000160208101906104a49190610810565b84846104b360408a018a610882565b6040518663ffffffff1660e01b81526004016104d3959493929190610aaf565b6020604051808303816000875af11580156104f2573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061051691906109c0565b925061052860e0850160c08601610845565b6001600160a01b0384811660008181526020819052604090819020805467ffffffffffffffff191667ffffffffffffffff9590951694909417909355915190841691907f3099cd8e4377ae77043ad3eaf9b8378b4821c82145cc78c0525c6164717a401c90610598908890610c1e565b60405180910390a350915091565b6001600160a01b03858116600090815260208190526040908190205490517f4acbb4be00000000000000000000000000000000000000000000000000000000815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa158015610649573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061066d9190610860565b61068a5760405163ea8e4eb560e01b815260040160405180910390fd5b856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516106c99493929190610d4a565b60405180910390a2505050505050565b6000602082840312156106eb57600080fd5b813567ffffffffffffffff81111561070257600080fd5b8201610100818503121561071557600080fd5b9392505050565b6001600160a01b038116811461073157600080fd5b50565b803561073f8161071c565b919050565b60008083601f84011261075657600080fd5b50813567ffffffffffffffff81111561076e57600080fd5b60208301915083602082850101111561078657600080fd5b9250929050565b6000806000806000606086880312156107a557600080fd5b85356107b08161071c565b9450602086013567ffffffffffffffff808211156107cd57600080fd5b6107d989838a01610744565b909650945060408801359150808211156107f257600080fd5b506107ff88828901610744565b969995985093965092949392505050565b60006020828403121561082257600080fd5b81356107158161071c565b803567ffffffffffffffff8116811461073f57600080fd5b60006020828403121561085757600080fd5b6107158261082d565b60006020828403121561087257600080fd5b8151801515811461071557600080fd5b6000808335601e1984360301811261089957600080fd5b83018035915067ffffffffffffffff8211156108b457600080fd5b6020019150600581901b360382131561078657600080fd5b803563ffffffff8116811461073f57600080fd5b6000602082840312156108f257600080fd5b610715826108cc565b8183526000602080850194508260005b858110156109345763ffffffff610921836108cc565b168752958201959082019060010161090b565b509495945050505050565b6080808252810186905260008760a08301825b898110156109825782356109658161071c565b6001600160a01b0316825260209283019290910190600101610952565b50838103602085015261099681888a6108fb565b9250505063ffffffff841660408301526001600160a01b0383166060830152979650505050505050565b6000602082840312156109d257600080fd5b81516107158161071c565b634e487b7160e01b600052601160045260246000fd5b80820180821115610a0657610a066109dd565b92915050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b600060018201610a4a57610a4a6109dd565b5060010190565b81810381811115610a0657610a066109dd565b81835260007f07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff831115610a9657600080fd5b8260051b80836020870137939093016020019392505050565b6000608082016001600160a01b0380891684526020818916818601526080604086015282885180855260a087019150828a01945060005b81811015610b04578551851683529483019491830191600101610ae6565b50508581036060870152610b1981888a610a64565b9b9a5050505050505050505050565b6000808335601e19843603018112610b3f57600080fd5b830160208101925035905067ffffffffffffffff811115610b5f57600080fd5b8060051b360382131561078657600080fd5b8183526000602080850194508260005b85811015610934578135610b948161071c565b6001600160a01b031687529582019590820190600101610b81565b6000808335601e19843603018112610bc657600080fd5b830160208101925035905067ffffffffffffffff811115610be657600080fd5b80360382131561078657600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60208152610c3f60208201610c3284610734565b6001600160a01b03169052565b6000610c4e6020840184610b28565b610100806040860152610c6661012086018385610b71565b9250610c756040870187610b28565b9250601f1980878603016060880152610c8f858584610a64565b9450610c9e6060890189610b28565b9450915080878603016080880152610cb7858584610b71565b9450610cc66080890189610b28565b94509150808786030160a0880152610cdf8585846108fb565b9450610ced60a089016108cc565b63ffffffff811660c08901529350610d0760c0890161082d565b67ffffffffffffffff811660e08901529350610d2660e0890189610baf565b9450915080878603018388015250610d3f848483610bf5565b979650505050505050565b604081526000610d5e604083018688610bf5565b8281036020840152610d3f818587610bf556fea2646970667358221220bf1d9c28ee588b7346cfab8da07e1a5f83dd9bd05c9bc9b603343eaab25a634d64736f6c63430008110033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
