{
  "_format": "hh-sol-artifact-1",
  "contractName": "RevenueModuleFactory",
  "sourceName": "contracts/RevenueModuleFactory.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "contract INodeRegistry",
          "name": "_nodeRegistry",
          "type": "address"
        },
        {
          "internalType": "contract ISplitMain",
          "name": "_splits",
          "type": "address"
        },
        {
          "internalType": "contract IWaterfallModuleFactory",
          "name": "_waterfallFactory",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "InvalidConfiguration",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NotAuthorized",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "resource",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "topic",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "ResourceBroadcast",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "split",
          "type": "address"
        },
        {
          "components": [
            {
              "internalType": "address",
              "name": "token",
              "type": "address"
            },
            {
              "internalType": "address[]",
              "name": "waterfallRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint256[]",
              "name": "waterfallThresholds",
              "type": "uint256[]"
            },
            {
              "internalType": "address[]",
              "name": "splitRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint32[]",
              "name": "splitPercentAllocations",
              "type": "uint32[]"
            },
            {
              "internalType": "uint32",
              "name": "splitDistributorFee",
              "type": "uint32"
            },
            {
              "internalType": "uint64",
              "name": "controlNodeId",
              "type": "uint64"
            },
            {
              "internalType": "string",
              "name": "metadata",
              "type": "string"
            }
          ],
          "indexed": false,
          "internalType": "struct DeployRevenueModuleConfig",
          "name": "config",
          "type": "tuple"
        }
      ],
      "name": "RevenueModuleDeployed",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "resource",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "topic",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "broadcast",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "controlNode",
      "outputs": [
        {
          "internalType": "uint64",
          "name": "",
          "type": "uint64"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "token",
              "type": "address"
            },
            {
              "internalType": "address[]",
              "name": "waterfallRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint256[]",
              "name": "waterfallThresholds",
              "type": "uint256[]"
            },
            {
              "internalType": "address[]",
              "name": "splitRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint32[]",
              "name": "splitPercentAllocations",
              "type": "uint32[]"
            },
            {
              "internalType": "uint32",
              "name": "splitDistributorFee",
              "type": "uint32"
            },
            {
              "internalType": "uint64",
              "name": "controlNodeId",
              "type": "uint64"
            },
            {
              "internalType": "string",
              "name": "metadata",
              "type": "string"
            }
          ],
          "internalType": "struct DeployRevenueModuleConfig",
          "name": "config",
          "type": "tuple"
        }
      ],
      "name": "deployRevenueModule",
      "outputs": [
        {
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "split",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nodeRegistry",
      "outputs": [
        {
          "internalType": "contract INodeRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "splits",
      "outputs": [
        {
          "internalType": "contract ISplitMain",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "waterfallFactory",
      "outputs": [
        {
          "internalType": "contract IWaterfallModuleFactory",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x60e060405234801561001057600080fd5b50604051610fc7380380610fc783398101604081905261002f91610064565b6001600160a01b0392831660805290821660a0521660c0526100b1565b6001600160a01b038116811461006157600080fd5b50565b60008060006060848603121561007957600080fd5b83516100848161004c565b60208501519093506100958161004c565b60408501519092506100a68161004c565b809150509250925092565b60805160a05160c051610ecc6100fb6000396000818161014b015261053a01526000818160b401526102f90152600081816101720152818161021001526107270152610ecc6000f3fe608060405234801561001057600080fd5b50600436106100725760003560e01c8063b929a8ae11610050578063b929a8ae14610103578063c38b125914610146578063d9b5c4a51461016d57600080fd5b80630edf76c7146100775780636cbdec7d146100af5780636dbb47b5146100ee575b600080fd5b61008a6100853660046107fe565b610194565b604080516001600160a01b039384168152929091166020830152015b60405180910390f35b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100a6565b6101016100fc3660046108b2565b6106cb565b005b61012d610111366004610935565b60006020819052908152604090205467ffffffffffffffff1681565b60405167ffffffffffffffff90911681526020016100a6565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b60008080806101a66060860186610952565b90501190506000808580602001906101be9190610952565b9050119050811580156101cf575080155b15610206576040517fc52a9bd300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016634acbb4be61024560e0880160c089016109b4565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b16815267ffffffffffffffff9091166004820152336024820152604401602060405180830381865afa1580156102a8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102cc91906109cf565b6102e95760405163ea8e4eb560e01b815260040160405180910390fd5b81156103b1576001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016637601f78261032b6060880188610952565b61033860808a018a610952565b61034860c08c0160a08d01610a05565b60006040518763ffffffff1660e01b815260040161036b96959493929190610a64565b6020604051808303816000875af115801561038a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103ae9190610ae5565b92505b806103bf5750909391925050565b60006103ce6020870187610952565b8080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092935050841591506105309050576104176020870187610952565b61042391506001610b18565b67ffffffffffffffff81111561043b5761043b610b31565b604051908082528060200260200182016040528015610464578160200160208202803683370190505b50905060005b6104776020880188610952565b90508110156104ee5761048d6020880188610952565b8281811061049d5761049d610b47565b90506020020160208101906104b29190610935565b8282815181106104c4576104c4610b47565b6001600160a01b0390921660209283029190910190910152806104e681610b5d565b91505061046a565b508381600183516104ff9190610b76565b8151811061050f5761050f610b47565b60200260200101906001600160a01b031690816001600160a01b0316815250505b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001663c93793f361056c6020890189610935565b836001855161057b9190610b76565b8151811061058b5761058b610b47565b6020026020010151848a80604001906105a49190610952565b6040518663ffffffff1660e01b81526004016105c4959493929190610bd4565b6020604051808303816000875af11580156105e3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106079190610ae5565b945061061960e0870160c088016109b4565b6000806001600160a01b0388166106305786610632565b875b6001600160a01b03166001600160a01b0316815260200190815260200160002060006101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550836001600160a01b0316856001600160a01b03167f3099cd8e4377ae77043ad3eaf9b8378b4821c82145cc78c0525c6164717a401c886040516106bb9190610d43565b60405180910390a3505050915091565b6001600160a01b03858116600090815260208190526040908190205490517f4acbb4be00000000000000000000000000000000000000000000000000000000815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa15801561076e573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061079291906109cf565b6107af5760405163ea8e4eb560e01b815260040160405180910390fd5b856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516107ee9493929190610e6f565b60405180910390a2505050505050565b60006020828403121561081057600080fd5b813567ffffffffffffffff81111561082757600080fd5b8201610100818503121561083a57600080fd5b9392505050565b6001600160a01b038116811461085657600080fd5b50565b803561086481610841565b919050565b60008083601f84011261087b57600080fd5b50813567ffffffffffffffff81111561089357600080fd5b6020830191508360208285010111156108ab57600080fd5b9250929050565b6000806000806000606086880312156108ca57600080fd5b85356108d581610841565b9450602086013567ffffffffffffffff808211156108f257600080fd5b6108fe89838a01610869565b9096509450604088013591508082111561091757600080fd5b5061092488828901610869565b969995985093965092949392505050565b60006020828403121561094757600080fd5b813561083a81610841565b6000808335601e1984360301811261096957600080fd5b83018035915067ffffffffffffffff82111561098457600080fd5b6020019150600581901b36038213156108ab57600080fd5b803567ffffffffffffffff8116811461086457600080fd5b6000602082840312156109c657600080fd5b61083a8261099c565b6000602082840312156109e157600080fd5b8151801515811461083a57600080fd5b803563ffffffff8116811461086457600080fd5b600060208284031215610a1757600080fd5b61083a826109f1565b8183526000602080850194508260005b85811015610a595763ffffffff610a46836109f1565b1687529582019590820190600101610a30565b509495945050505050565b6080808252810186905260008760a08301825b89811015610aa7578235610a8a81610841565b6001600160a01b0316825260209283019290910190600101610a77565b508381036020850152610abb81888a610a20565b9250505063ffffffff841660408301526001600160a01b0383166060830152979650505050505050565b600060208284031215610af757600080fd5b815161083a81610841565b634e487b7160e01b600052601160045260246000fd5b80820180821115610b2b57610b2b610b02565b92915050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b600060018201610b6f57610b6f610b02565b5060010190565b81810381811115610b2b57610b2b610b02565b81835260007f07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff831115610bbb57600080fd5b8260051b80836020870137939093016020019392505050565b6000608082016001600160a01b0380891684526020818916818601526080604086015282885180855260a087019150828a01945060005b81811015610c29578551851683529483019491830191600101610c0b565b50508581036060870152610c3e81888a610b89565b9b9a5050505050505050505050565b6000808335601e19843603018112610c6457600080fd5b830160208101925035905067ffffffffffffffff811115610c8457600080fd5b8060051b36038213156108ab57600080fd5b8183526000602080850194508260005b85811015610a59578135610cb981610841565b6001600160a01b031687529582019590820190600101610ca6565b6000808335601e19843603018112610ceb57600080fd5b830160208101925035905067ffffffffffffffff811115610d0b57600080fd5b8036038213156108ab57600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60208152610d6460208201610d5784610859565b6001600160a01b03169052565b6000610d736020840184610c4d565b610100806040860152610d8b61012086018385610c96565b9250610d9a6040870187610c4d565b9250601f1980878603016060880152610db4858584610b89565b9450610dc36060890189610c4d565b9450915080878603016080880152610ddc858584610c96565b9450610deb6080890189610c4d565b94509150808786030160a0880152610e04858584610a20565b9450610e1260a089016109f1565b63ffffffff811660c08901529350610e2c60c0890161099c565b67ffffffffffffffff811660e08901529350610e4b60e0890189610cd4565b9450915080878603018388015250610e64848483610d1a565b979650505050505050565b604081526000610e83604083018688610d1a565b8281036020840152610e64818587610d1a56fea26469706673582212208c6cfdc977688d89d799009f6f501c4c99ba05c60a297c4f2ebd389c644025d864736f6c63430008110033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100725760003560e01c8063b929a8ae11610050578063b929a8ae14610103578063c38b125914610146578063d9b5c4a51461016d57600080fd5b80630edf76c7146100775780636cbdec7d146100af5780636dbb47b5146100ee575b600080fd5b61008a6100853660046107fe565b610194565b604080516001600160a01b039384168152929091166020830152015b60405180910390f35b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100a6565b6101016100fc3660046108b2565b6106cb565b005b61012d610111366004610935565b60006020819052908152604090205467ffffffffffffffff1681565b60405167ffffffffffffffff90911681526020016100a6565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b60008080806101a66060860186610952565b90501190506000808580602001906101be9190610952565b9050119050811580156101cf575080155b15610206576040517fc52a9bd300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016634acbb4be61024560e0880160c089016109b4565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b16815267ffffffffffffffff9091166004820152336024820152604401602060405180830381865afa1580156102a8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102cc91906109cf565b6102e95760405163ea8e4eb560e01b815260040160405180910390fd5b81156103b1576001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016637601f78261032b6060880188610952565b61033860808a018a610952565b61034860c08c0160a08d01610a05565b60006040518763ffffffff1660e01b815260040161036b96959493929190610a64565b6020604051808303816000875af115801561038a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103ae9190610ae5565b92505b806103bf5750909391925050565b60006103ce6020870187610952565b8080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092935050841591506105309050576104176020870187610952565b61042391506001610b18565b67ffffffffffffffff81111561043b5761043b610b31565b604051908082528060200260200182016040528015610464578160200160208202803683370190505b50905060005b6104776020880188610952565b90508110156104ee5761048d6020880188610952565b8281811061049d5761049d610b47565b90506020020160208101906104b29190610935565b8282815181106104c4576104c4610b47565b6001600160a01b0390921660209283029190910190910152806104e681610b5d565b91505061046a565b508381600183516104ff9190610b76565b8151811061050f5761050f610b47565b60200260200101906001600160a01b031690816001600160a01b0316815250505b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001663c93793f361056c6020890189610935565b836001855161057b9190610b76565b8151811061058b5761058b610b47565b6020026020010151848a80604001906105a49190610952565b6040518663ffffffff1660e01b81526004016105c4959493929190610bd4565b6020604051808303816000875af11580156105e3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106079190610ae5565b945061061960e0870160c088016109b4565b6000806001600160a01b0388166106305786610632565b875b6001600160a01b03166001600160a01b0316815260200190815260200160002060006101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550836001600160a01b0316856001600160a01b03167f3099cd8e4377ae77043ad3eaf9b8378b4821c82145cc78c0525c6164717a401c886040516106bb9190610d43565b60405180910390a3505050915091565b6001600160a01b03858116600090815260208190526040908190205490517f4acbb4be00000000000000000000000000000000000000000000000000000000815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa15801561076e573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061079291906109cf565b6107af5760405163ea8e4eb560e01b815260040160405180910390fd5b856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516107ee9493929190610e6f565b60405180910390a2505050505050565b60006020828403121561081057600080fd5b813567ffffffffffffffff81111561082757600080fd5b8201610100818503121561083a57600080fd5b9392505050565b6001600160a01b038116811461085657600080fd5b50565b803561086481610841565b919050565b60008083601f84011261087b57600080fd5b50813567ffffffffffffffff81111561089357600080fd5b6020830191508360208285010111156108ab57600080fd5b9250929050565b6000806000806000606086880312156108ca57600080fd5b85356108d581610841565b9450602086013567ffffffffffffffff808211156108f257600080fd5b6108fe89838a01610869565b9096509450604088013591508082111561091757600080fd5b5061092488828901610869565b969995985093965092949392505050565b60006020828403121561094757600080fd5b813561083a81610841565b6000808335601e1984360301811261096957600080fd5b83018035915067ffffffffffffffff82111561098457600080fd5b6020019150600581901b36038213156108ab57600080fd5b803567ffffffffffffffff8116811461086457600080fd5b6000602082840312156109c657600080fd5b61083a8261099c565b6000602082840312156109e157600080fd5b8151801515811461083a57600080fd5b803563ffffffff8116811461086457600080fd5b600060208284031215610a1757600080fd5b61083a826109f1565b8183526000602080850194508260005b85811015610a595763ffffffff610a46836109f1565b1687529582019590820190600101610a30565b509495945050505050565b6080808252810186905260008760a08301825b89811015610aa7578235610a8a81610841565b6001600160a01b0316825260209283019290910190600101610a77565b508381036020850152610abb81888a610a20565b9250505063ffffffff841660408301526001600160a01b0383166060830152979650505050505050565b600060208284031215610af757600080fd5b815161083a81610841565b634e487b7160e01b600052601160045260246000fd5b80820180821115610b2b57610b2b610b02565b92915050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b600060018201610b6f57610b6f610b02565b5060010190565b81810381811115610b2b57610b2b610b02565b81835260007f07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff831115610bbb57600080fd5b8260051b80836020870137939093016020019392505050565b6000608082016001600160a01b0380891684526020818916818601526080604086015282885180855260a087019150828a01945060005b81811015610c29578551851683529483019491830191600101610c0b565b50508581036060870152610c3e81888a610b89565b9b9a5050505050505050505050565b6000808335601e19843603018112610c6457600080fd5b830160208101925035905067ffffffffffffffff811115610c8457600080fd5b8060051b36038213156108ab57600080fd5b8183526000602080850194508260005b85811015610a59578135610cb981610841565b6001600160a01b031687529582019590820190600101610ca6565b6000808335601e19843603018112610ceb57600080fd5b830160208101925035905067ffffffffffffffff811115610d0b57600080fd5b8036038213156108ab57600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60208152610d6460208201610d5784610859565b6001600160a01b03169052565b6000610d736020840184610c4d565b610100806040860152610d8b61012086018385610c96565b9250610d9a6040870187610c4d565b9250601f1980878603016060880152610db4858584610b89565b9450610dc36060890189610c4d565b9450915080878603016080880152610ddc858584610c96565b9450610deb6080890189610c4d565b94509150808786030160a0880152610e04858584610a20565b9450610e1260a089016109f1565b63ffffffff811660c08901529350610e2c60c0890161099c565b67ffffffffffffffff811660e08901529350610e4b60e0890189610cd4565b9450915080878603018388015250610e64848483610d1a565b979650505050505050565b604081526000610e83604083018688610d1a565b8281036020840152610e64818587610d1a56fea26469706673582212208c6cfdc977688d89d799009f6f501c4c99ba05c60a297c4f2ebd389c644025d864736f6c63430008110033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
