{
  "_format": "hh-sol-artifact-1",
  "contractName": "RevenueModuleFactory",
  "sourceName": "contracts/RevenueModuleFactory.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "contract INodeRegistry",
          "name": "_nodeRegistry",
          "type": "address"
        },
        {
          "internalType": "contract ISplitMain",
          "name": "_splits",
          "type": "address"
        },
        {
          "internalType": "contract IWaterfallModuleFactory",
          "name": "_waterfallFactory",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "InvalidConfiguration",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NotAuthorized",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "resource",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "topic",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "ResourceBroadcast",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "split",
          "type": "address"
        },
        {
          "components": [
            {
              "internalType": "address",
              "name": "token",
              "type": "address"
            },
            {
              "internalType": "address[]",
              "name": "waterfallRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint256[]",
              "name": "waterfallThresholds",
              "type": "uint256[]"
            },
            {
              "internalType": "address[]",
              "name": "splitRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint32[]",
              "name": "splitPercentAllocations",
              "type": "uint32[]"
            },
            {
              "internalType": "uint32",
              "name": "splitDistributorFee",
              "type": "uint32"
            },
            {
              "internalType": "uint64",
              "name": "controlNodeId",
              "type": "uint64"
            },
            {
              "internalType": "string",
              "name": "metadata",
              "type": "string"
            }
          ],
          "indexed": false,
          "internalType": "struct DeployRevenueModuleConfig",
          "name": "config",
          "type": "tuple"
        }
      ],
      "name": "RevenueModuleDeployed",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "resource",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "topic",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "message",
          "type": "string"
        }
      ],
      "name": "broadcast",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "controlNode",
      "outputs": [
        {
          "internalType": "uint64",
          "name": "",
          "type": "uint64"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "token",
              "type": "address"
            },
            {
              "internalType": "address[]",
              "name": "waterfallRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint256[]",
              "name": "waterfallThresholds",
              "type": "uint256[]"
            },
            {
              "internalType": "address[]",
              "name": "splitRecipients",
              "type": "address[]"
            },
            {
              "internalType": "uint32[]",
              "name": "splitPercentAllocations",
              "type": "uint32[]"
            },
            {
              "internalType": "uint32",
              "name": "splitDistributorFee",
              "type": "uint32"
            },
            {
              "internalType": "uint64",
              "name": "controlNodeId",
              "type": "uint64"
            },
            {
              "internalType": "string",
              "name": "metadata",
              "type": "string"
            }
          ],
          "internalType": "struct DeployRevenueModuleConfig",
          "name": "config",
          "type": "tuple"
        }
      ],
      "name": "deployRevenueModule",
      "outputs": [
        {
          "internalType": "address",
          "name": "waterfall",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "split",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "nodeRegistry",
      "outputs": [
        {
          "internalType": "contract INodeRegistry",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "splits",
      "outputs": [
        {
          "internalType": "contract ISplitMain",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "waterfallFactory",
      "outputs": [
        {
          "internalType": "contract IWaterfallModuleFactory",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x60e060405234801561001057600080fd5b5060405161101238038061101283398101604081905261002f91610064565b6001600160a01b0392831660805290821660a0521660c0526100b1565b6001600160a01b038116811461006157600080fd5b50565b60008060006060848603121561007957600080fd5b83516100848161004c565b60208501519093506100958161004c565b60408501519092506100a68161004c565b809150509250925092565b60805160a05160c051610f176100fb6000396000818161014b015261058501526000818160b401526102f90152600081816101720152818161021001526107720152610f176000f3fe608060405234801561001057600080fd5b50600436106100725760003560e01c8063b929a8ae11610050578063b929a8ae14610103578063c38b125914610146578063d9b5c4a51461016d57600080fd5b80630edf76c7146100775780636cbdec7d146100af5780636dbb47b5146100ee575b600080fd5b61008a610085366004610849565b610194565b604080516001600160a01b039384168152929091166020830152015b60405180910390f35b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100a6565b6101016100fc3660046108fd565b610716565b005b61012d610111366004610980565b60006020819052908152604090205467ffffffffffffffff1681565b60405167ffffffffffffffff90911681526020016100a6565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b60008080806101a6606086018661099d565b90501190506000808580602001906101be919061099d565b9050119050811580156101cf575080155b15610206576040517fc52a9bd300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016634acbb4be61024560e0880160c089016109ff565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b16815267ffffffffffffffff9091166004820152336024820152604401602060405180830381865afa1580156102a8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102cc9190610a1a565b6102e95760405163ea8e4eb560e01b815260040160405180910390fd5b81156103b1576001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016637601f78261032b606088018861099d565b61033860808a018a61099d565b61034860c08c0160a08d01610a50565b60006040518763ffffffff1660e01b815260040161036b96959493929190610aaf565b6020604051808303816000875af115801561038a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103ae9190610b30565b92505b8061040a57826001600160a01b0316846001600160a01b03167f3099cd8e4377ae77043ad3eaf9b8378b4821c82145cc78c0525c6164717a401c876040516103f99190610c8e565b60405180910390a350909391925050565b6000610419602087018761099d565b80806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929350508415915061057b905057610462602087018761099d565b61046e91506001610dd0565b67ffffffffffffffff81111561048657610486610de9565b6040519080825280602002602001820160405280156104af578160200160208202803683370190505b50905060005b6104c2602088018861099d565b9050811015610539576104d8602088018861099d565b828181106104e8576104e8610dff565b90506020020160208101906104fd9190610980565b82828151811061050f5761050f610dff565b6001600160a01b03909216602092830291909101909101528061053181610e15565b9150506104b5565b5083816001835161054a9190610e2e565b8151811061055a5761055a610dff565b60200260200101906001600160a01b031690816001600160a01b0316815250505b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001663c93793f36105b76020890189610980565b83600185516105c69190610e2e565b815181106105d6576105d6610dff565b6020026020010151848a80604001906105ef919061099d565b6040518663ffffffff1660e01b815260040161060f959493929190610e41565b6020604051808303816000875af115801561062e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106529190610b30565b945061066460e0870160c088016109ff565b6000806001600160a01b03881661067b578661067d565b875b6001600160a01b03166001600160a01b0316815260200190815260200160002060006101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550836001600160a01b0316856001600160a01b03167f3099cd8e4377ae77043ad3eaf9b8378b4821c82145cc78c0525c6164717a401c886040516107069190610c8e565b60405180910390a3505050915091565b6001600160a01b03858116600090815260208190526040908190205490517f4acbb4be00000000000000000000000000000000000000000000000000000000815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa1580156107b9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107dd9190610a1a565b6107fa5760405163ea8e4eb560e01b815260040160405180910390fd5b856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516108399493929190610eba565b60405180910390a2505050505050565b60006020828403121561085b57600080fd5b813567ffffffffffffffff81111561087257600080fd5b8201610100818503121561088557600080fd5b9392505050565b6001600160a01b03811681146108a157600080fd5b50565b80356108af8161088c565b919050565b60008083601f8401126108c657600080fd5b50813567ffffffffffffffff8111156108de57600080fd5b6020830191508360208285010111156108f657600080fd5b9250929050565b60008060008060006060868803121561091557600080fd5b85356109208161088c565b9450602086013567ffffffffffffffff8082111561093d57600080fd5b61094989838a016108b4565b9096509450604088013591508082111561096257600080fd5b5061096f888289016108b4565b969995985093965092949392505050565b60006020828403121561099257600080fd5b81356108858161088c565b6000808335601e198436030181126109b457600080fd5b83018035915067ffffffffffffffff8211156109cf57600080fd5b6020019150600581901b36038213156108f657600080fd5b803567ffffffffffffffff811681146108af57600080fd5b600060208284031215610a1157600080fd5b610885826109e7565b600060208284031215610a2c57600080fd5b8151801515811461088557600080fd5b803563ffffffff811681146108af57600080fd5b600060208284031215610a6257600080fd5b61088582610a3c565b8183526000602080850194508260005b85811015610aa45763ffffffff610a9183610a3c565b1687529582019590820190600101610a7b565b509495945050505050565b6080808252810186905260008760a08301825b89811015610af2578235610ad58161088c565b6001600160a01b0316825260209283019290910190600101610ac2565b508381036020850152610b0681888a610a6b565b9250505063ffffffff841660408301526001600160a01b0383166060830152979650505050505050565b600060208284031215610b4257600080fd5b81516108858161088c565b6000808335601e19843603018112610b6457600080fd5b830160208101925035905067ffffffffffffffff811115610b8457600080fd5b8060051b36038213156108f657600080fd5b8183526000602080850194508260005b85811015610aa4578135610bb98161088c565b6001600160a01b031687529582019590820190600101610ba6565b81835260007f07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff831115610c0657600080fd5b8260051b80836020870137939093016020019392505050565b6000808335601e19843603018112610c3657600080fd5b830160208101925035905067ffffffffffffffff811115610c5657600080fd5b8036038213156108f657600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60208152610caf60208201610ca2846108a4565b6001600160a01b03169052565b6000610cbe6020840184610b4d565b610100806040860152610cd661012086018385610b96565b9250610ce56040870187610b4d565b9250601f1980878603016060880152610cff858584610bd4565b9450610d0e6060890189610b4d565b9450915080878603016080880152610d27858584610b96565b9450610d366080890189610b4d565b94509150808786030160a0880152610d4f858584610a6b565b9450610d5d60a08901610a3c565b63ffffffff811660c08901529350610d7760c089016109e7565b67ffffffffffffffff811660e08901529350610d9660e0890189610c1f565b9450915080878603018388015250610daf848483610c65565b979650505050505050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610de357610de3610dba565b92915050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b600060018201610e2757610e27610dba565b5060010190565b81810381811115610de357610de3610dba565b6000608082016001600160a01b0380891684526020818916818601526080604086015282885180855260a087019150828a01945060005b81811015610e96578551851683529483019491830191600101610e78565b50508581036060870152610eab81888a610bd4565b9b9a5050505050505050505050565b604081526000610ece604083018688610c65565b8281036020840152610daf818587610c6556fea2646970667358221220a5d87de518f2b97252663218e7fd58beaa80d3992d4f0d0fea23c5b8e46a1d6b64736f6c63430008110033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100725760003560e01c8063b929a8ae11610050578063b929a8ae14610103578063c38b125914610146578063d9b5c4a51461016d57600080fd5b80630edf76c7146100775780636cbdec7d146100af5780636dbb47b5146100ee575b600080fd5b61008a610085366004610849565b610194565b604080516001600160a01b039384168152929091166020830152015b60405180910390f35b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016100a6565b6101016100fc3660046108fd565b610716565b005b61012d610111366004610980565b60006020819052908152604090205467ffffffffffffffff1681565b60405167ffffffffffffffff90911681526020016100a6565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b6100d67f000000000000000000000000000000000000000000000000000000000000000081565b60008080806101a6606086018661099d565b90501190506000808580602001906101be919061099d565b9050119050811580156101cf575080155b15610206576040517fc52a9bd300000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016634acbb4be61024560e0880160c089016109ff565b6040517fffffffff0000000000000000000000000000000000000000000000000000000060e084901b16815267ffffffffffffffff9091166004820152336024820152604401602060405180830381865afa1580156102a8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102cc9190610a1a565b6102e95760405163ea8e4eb560e01b815260040160405180910390fd5b81156103b1576001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016637601f78261032b606088018861099d565b61033860808a018a61099d565b61034860c08c0160a08d01610a50565b60006040518763ffffffff1660e01b815260040161036b96959493929190610aaf565b6020604051808303816000875af115801561038a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103ae9190610b30565b92505b8061040a57826001600160a01b0316846001600160a01b03167f3099cd8e4377ae77043ad3eaf9b8378b4821c82145cc78c0525c6164717a401c876040516103f99190610c8e565b60405180910390a350909391925050565b6000610419602087018761099d565b80806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929350508415915061057b905057610462602087018761099d565b61046e91506001610dd0565b67ffffffffffffffff81111561048657610486610de9565b6040519080825280602002602001820160405280156104af578160200160208202803683370190505b50905060005b6104c2602088018861099d565b9050811015610539576104d8602088018861099d565b828181106104e8576104e8610dff565b90506020020160208101906104fd9190610980565b82828151811061050f5761050f610dff565b6001600160a01b03909216602092830291909101909101528061053181610e15565b9150506104b5565b5083816001835161054a9190610e2e565b8151811061055a5761055a610dff565b60200260200101906001600160a01b031690816001600160a01b0316815250505b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001663c93793f36105b76020890189610980565b83600185516105c69190610e2e565b815181106105d6576105d6610dff565b6020026020010151848a80604001906105ef919061099d565b6040518663ffffffff1660e01b815260040161060f959493929190610e41565b6020604051808303816000875af115801561062e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106529190610b30565b945061066460e0870160c088016109ff565b6000806001600160a01b03881661067b578661067d565b875b6001600160a01b03166001600160a01b0316815260200190815260200160002060006101000a81548167ffffffffffffffff021916908367ffffffffffffffff160217905550836001600160a01b0316856001600160a01b03167f3099cd8e4377ae77043ad3eaf9b8378b4821c82145cc78c0525c6164717a401c886040516107069190610c8e565b60405180910390a3505050915091565b6001600160a01b03858116600090815260208190526040908190205490517f4acbb4be00000000000000000000000000000000000000000000000000000000815267ffffffffffffffff909116600482015233602482015286917f00000000000000000000000000000000000000000000000000000000000000001690634acbb4be90604401602060405180830381865afa1580156107b9573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107dd9190610a1a565b6107fa5760405163ea8e4eb560e01b815260040160405180910390fd5b856001600160a01b03167f091d81fa1963b57ce1a1e48a7c007897995d20188e9ef8657cf6ab13e8cc6185868686866040516108399493929190610eba565b60405180910390a2505050505050565b60006020828403121561085b57600080fd5b813567ffffffffffffffff81111561087257600080fd5b8201610100818503121561088557600080fd5b9392505050565b6001600160a01b03811681146108a157600080fd5b50565b80356108af8161088c565b919050565b60008083601f8401126108c657600080fd5b50813567ffffffffffffffff8111156108de57600080fd5b6020830191508360208285010111156108f657600080fd5b9250929050565b60008060008060006060868803121561091557600080fd5b85356109208161088c565b9450602086013567ffffffffffffffff8082111561093d57600080fd5b61094989838a016108b4565b9096509450604088013591508082111561096257600080fd5b5061096f888289016108b4565b969995985093965092949392505050565b60006020828403121561099257600080fd5b81356108858161088c565b6000808335601e198436030181126109b457600080fd5b83018035915067ffffffffffffffff8211156109cf57600080fd5b6020019150600581901b36038213156108f657600080fd5b803567ffffffffffffffff811681146108af57600080fd5b600060208284031215610a1157600080fd5b610885826109e7565b600060208284031215610a2c57600080fd5b8151801515811461088557600080fd5b803563ffffffff811681146108af57600080fd5b600060208284031215610a6257600080fd5b61088582610a3c565b8183526000602080850194508260005b85811015610aa45763ffffffff610a9183610a3c565b1687529582019590820190600101610a7b565b509495945050505050565b6080808252810186905260008760a08301825b89811015610af2578235610ad58161088c565b6001600160a01b0316825260209283019290910190600101610ac2565b508381036020850152610b0681888a610a6b565b9250505063ffffffff841660408301526001600160a01b0383166060830152979650505050505050565b600060208284031215610b4257600080fd5b81516108858161088c565b6000808335601e19843603018112610b6457600080fd5b830160208101925035905067ffffffffffffffff811115610b8457600080fd5b8060051b36038213156108f657600080fd5b8183526000602080850194508260005b85811015610aa4578135610bb98161088c565b6001600160a01b031687529582019590820190600101610ba6565b81835260007f07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff831115610c0657600080fd5b8260051b80836020870137939093016020019392505050565b6000808335601e19843603018112610c3657600080fd5b830160208101925035905067ffffffffffffffff811115610c5657600080fd5b8036038213156108f657600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60208152610caf60208201610ca2846108a4565b6001600160a01b03169052565b6000610cbe6020840184610b4d565b610100806040860152610cd661012086018385610b96565b9250610ce56040870187610b4d565b9250601f1980878603016060880152610cff858584610bd4565b9450610d0e6060890189610b4d565b9450915080878603016080880152610d27858584610b96565b9450610d366080890189610b4d565b94509150808786030160a0880152610d4f858584610a6b565b9450610d5d60a08901610a3c565b63ffffffff811660c08901529350610d7760c089016109e7565b67ffffffffffffffff811660e08901529350610d9660e0890189610c1f565b9450915080878603018388015250610daf848483610c65565b979650505050505050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610de357610de3610dba565b92915050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b600060018201610e2757610e27610dba565b5060010190565b81810381811115610de357610de3610dba565b6000608082016001600160a01b0380891684526020818916818601526080604086015282885180855260a087019150828a01945060005b81811015610e96578551851683529483019491830191600101610e78565b50508581036060870152610eab81888a610bd4565b9b9a5050505050505050505050565b604081526000610ece604083018688610c65565b8281036020840152610daf818587610c6556fea2646970667358221220a5d87de518f2b97252663218e7fd58beaa80d3992d4f0d0fea23c5b8e46a1d6b64736f6c63430008110033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
